---
Title: 101 包 (package)
Tags: [Document, Go]
---

# 101 包 (package)

---

## 概念

[[包]] 是结构化代码的一种方式。

一个 [[Go]] [[应用程序]] 可以有多个不同的包，但应至少包含一个名为 `main` 的包。
每个 `.go` 文件都属于且仅属于一个包，一个包允许包含多个 `.go` 文件。

包名要求小写，且通常和文件名不相同。
根据惯例，每个目录都只包含一个包。

## 声明

在 `.go` 文件非注释的第一行，须显式指明其属于哪个包。

```Go
package main
```

## 导入

Go 使用 `import` [[关键字]] 告诉 [[编译器]] 程序需要使用什么包，包名被封闭在双引号中。

如果需要导入多个包，可以多次使用 `import` 分别导入；不过更推荐的是使用因式分解关键字。

```Go
import (
    "fmt"
    "os"
)
```

导入时也可以为包设置别名，以避免包名之间的冲突。

```Go
package main

import fm "fmt"

func main() {
    fm.Println("hello world")
}
```

通常 Go 会在全局文件中寻找需要的包。
如果导入以 `./` 开头的包，那么 Go 会在相对目录中寻找；如果以 `/` 开头，则会在系统的绝对路径中寻找。

## 可见性

一个包内的 [[对象]] 都是互相可见的，因此除 `_` 外，剩余对象的 [[标识符]] 必须唯一，否则会发生冲突。

不过相同的标识符可以在不同的包中使用。
使用时要求带上包名，作为 [[命名空间]] 使用，避免对象名冲突，如 `fmt.Println()`。

包内的对象不会完全向外暴露，而是会遵循以下规则：
- 以大写字母开头的，可以被外部代码调用，这称之为“导出”
    - 大写字母不局限于 [[ASCII]] 中的 [[拉丁字母]]，基于 [[Unicode]] 的 [[希腊字母]] 也是允许的
- 以小写字母开头的，不可以被外部代码调用

## 没有不必要的代码

如果导入了一个没有被使用的包，会在构建程序时引发错误提示 `imported and not uesd: xxx`。