## 导出方式

### NamedExport

直接声明将对象导出供外部使用，没有额外封装。

具名导出可以同时存在多个。

```TypeScript
export { a }
export const b = "b";
```

```ascii
                            +---+
             +--- export -->+ a |
  +------+   |              +---+
  | File +---+
  +------+   |              +---+
             +--- export -->+ b |
                            +---+
```

```TypeScript
(270) ExportDeclaration             | export { a };
    (271) NamedExports              | { a }
        (273) ExportSpecifier       | a
            (79) Identifier         | a
(235) VariableStatement             | export const b = "b";
    (93) ExportKeyword              | export
    (253) VariableDeclarationList   | const b = "b"
        (252) VariableDeclaration   | b = "b"
            (79) Identifier         | b
            (10) StringLiteral      | "b"
```

### NamedDefaultExport

jQuery 的库往往会使用一个具名变量，作为这个模块的默认导出。
TypeScript 使用 `default` 标记之。

默认导出可以和其他具名导出共存，但一个模块只允许拥有一个默认导出。

```TypeScript
export default c;
```

```ascii
  +------+                      +---+
  | File +--- export default -->+ c |
  +------+                      +---+
```

```TypeScript
(269) ExportAssignment                     | export default c;
    (79) Identifier                        | c
```

### UnnamedDefaultExport

使用 `default` 标记一个匿名变量作为这个模块的默认导出。

默认导出可以和其他具名导出共存，但一个模块只允许拥有一个默认导出。

```TypeScript
export default { a, b };
```

```ascii
  +------+                          +---------+
  | File +----- export default ---->+ unnamed |
  +--+---+                          +----+----+
     |                                   |
     |              +---+                |
     +--- create -->+ a +<-- property ---+
     |              +---+                |
     |                                   |
     |              +---+                |
     +--- create -->+ b +<-- property ---+
                    +---+
```

```TypeScript
(269) ExportAssignment                     | export default { a, b };
    (203) ObjectLiteralExpression          | { a, b }
        (292) ShorthandPropertyAssignment  | a
            (79) Identifier                | a
        (292) ShorthandPropertyAssignment  | b
            (79) Identifier                | b
```

### EqualsExport

将所有需要导出的内容集合到一个对象中；这个对象既可以是匿名的，也可以是具名的，这里不特别区分。
虽然 `default` 可以实现类似的功能，但是 `default` 可以与其他的具名导出共存。

如果完全遵循 CommonJS 与 AMD 的设计，要求默认导出是唯一的导出，因此在 TypeScript 中，使用 `EqualsExport` 来保证。

```TypeScript
export = { a, b };
// or
export = c;
```

```ascii
  +------+                            +---+            +---------+
  | File +---------- export --------->+ c +--// or //--+ unnamed |
  +--+---+                            +-+-+            +---------+
     |                                  |
     |              +---+               |
     +--- create -->+ a +<-- property --+
     |              +---+               |
     |                                  |
     |              +---+               |
     +--- create -->+ b +<-- property --+
                    +---+
```

```TypeScript
(269) ExportAssignment                     | export = { a, b };
    (203) ObjectLiteralExpression          | { a, b }
        (292) ShorthandPropertyAssignment  | a
            (79) Identifier                | a
        (292) ShorthandPropertyAssignment  | b
            (79) Identifier                | b
// or
(269) ExportAssignment                     | export = c;
    (79) Identifier                        | c
```

### CommonJS

```TypeScript
exports.a = a;
```

## 导入方式

### NamedImport

根据一一对应的对象名，在模块中直接找到对应的导出内容。

`import type ...` 等附加了其他内容的语法在导入时的细节、含义上有些许不同，但本质上也是具名导入。

```TypeScript
import { a, b } from "mod";
```

```ascii
                            +---+
             +--- import -->+ b +--- reference -->
  +------+   |              +---+
  | File +---+
  +------+   |              +---+
             +--- import -->+ a +--- reference -->
                            +-+-+
```

```TypeScript
(264) ImportDeclaration           | import { a, b } from "mod";
    (265) ImportClause            | { a, b }
        (267) NamedImports        | { a, b }
            (268) ImportSpecifier | a
                (79) Identifier   | a
            (268) ImportSpecifier | b
                (79) Identifier   | b
    (10) StringLiteral            | "mod"
```

### NamespaceImport

导入的时候，使用单一的局部变量做到隔离访问的效果去访问导出的内容。
这种导入并非是真正的命名空间；访问时，事实上是以属性 `PropertyAccessExpression` 的方式访问的。

```TypeScript
import * as n from "mod";
```

```ascii
                                                 +---+
                                +--- property ---+ a +--- reference -->
  +------+              +---+   |                +---+
  | File +--- import -->+ n +---+
  +------+              +---+   |                +---+
                                +--- property ---+ b +--- reference -->
                                                 +---+
```

```TypeScript
(264) ImportDeclaration         | import * as n from "mod";
    (265) ImportClause          | * as n
        (266) NameSpaceImport   | * as n
            (79) Identifier     | n
    (10) StringLiteral          | "mod"
```

### DefaultImport

这种写法只会获取对应模块的默认导出，并在当前使用的文件内，通过另一个变量来引用。
不存在默认导出时，不可使用默认导入。

```TypeScript
import n from "mod";
```

```ascii
  +------+              +---+
  | File +--- import -->+ n +--- reference -->
  +------+              +---+
```

```TypeScript
(264) ImportDeclaration  | import n from "mod";
    (265) ImportClause   | n
        (79) Identifier  | n
    (10) StringLiteral   | "mod"
```

### EqualsImport

与 [[#EqualsExport]] 的存在意义相同的相应的导入方式。

导入时，获取导出的对象，并且将对象引用传递给新的局部变量。
因此，访问时，也遵循属性的方式去访问。

```TypeScript
import n = require("mod");
```

```ascii
                                                 +---+
                                +--- property ---+ a +--- reference -->
  +------+              +---+   |                +---+
  | File +--- import -->+ n +---+
  +------+              +---+   |                +---+
                                +--- property ---+ b +--- reference -->
                                                 +---+
```

```TypeScript
(263) ImportEqualsDeclaration      | import n = require("mod");
    (79) Identifier                | n
    (275) ExternalModuleReference  | require("mod")
        (10) StringLiteral         | "mod"
```

### CallImport

通过 `import` 关键字的函数调用 `CallExpression`，导入一个 `Promise` 对象。
需要使用 `then` 来**异步**执行导入后的操作。

导入的所有对象，被作为属性存放在 `import` 声明的变量内。

```TypeScript
var n = import("mod");

n.then( (m) => {} )
```

```ascii
  +------+              +---+                +------+             +----------+
  | File +--- import -->+ n +--- property -->+ then +--- local -->+ function |
  +------+              +---+                +------+             +----+-----+
                                                                       |
    +----------------------------- local ------------------------------+
    |                      +---+
    v     +--- property -->+ a +--- reference -->
  +-+-+   |                +---+
  | m +---+
  +---+   |                +---+
          +--- property -->+ b +--- reference -->
                           +---+
```

```TypeScript
(235) VariableStatement               | var n = import("mod");
    (253) VariableDeclarationList     | var n = import("mod")
        (252) VariableDeclaration     | n = import("mod")
            (79) Identifier           | n
            (206) CallExpression      | import("mod")
                (100) ImportKeyword   | import
                (10) StringLiteral    | "mod"
```

## 组合

|         导出         |       导入      |
|:--------------------:|:---------------:|
|      NamedExport     |   NamedImport   |
|           -          | NamespaceImport |
|           -          |   EqualsImport  |
|           -          |    CallImport   |
|  NamedDefaultExport  | NamespaceImport |
|           -          |  DefaultImport  |
|           -          |   EqualsImport  |
|           -          |    CallImport   |
| UnnamedDefaultExport | NamespaceImport |
|           -          |  DefaultImport  |
|           -          |   EqualsImport  |
|           -          |    CallImport   |
|     EqualsExport     |  DefaultImport  |
|           -          |   EqualsImport  |
|           -          |    CallImport   |

### Named - Named

```TypeScript
import { a, b } from "mod";

doSomething(a);
b();
```

```ascii
                            +---+
             +--- import -->+ b +----- reference ----+
  +------+   |              +---+                    |
  | File +---+                                       |
  +------+   |              +---+                    |
             +--- import -->+ a +--- reference --+   |
                            +---+                |   |
                                                 |   |
                            +---+                |   |
             +--- export -->+ a +<---------------+   |
  +------+   |              +---+                    |
  | File +---+                                       |
  +------+   |              +---+                    |
             +--- export -->+ b +<-------------------+
                            +---+
```

### Named - Namespace

```TypeScript
import * as n from "mod";

doSomething(n.a);
n.b();
```

```ascii
                                                  +---+
                                 +--- property -->+ b +----- reference  -----+
  +------+               +---+   |                +---+                      |
  | File +--- import --->+ n +---+                                           |
  +------+               +---+   |                +---+                      |
                                 +--- property -->+ a +--- reference ---+    |
                                                  +---+                 |    |
                                                                        |    |
                            +---+                                       |    |
             +--- export -->+ a +<--------------------------------------+    |
  +------+   |              +---+                                            |
  | File +---+                                                               |
  +------+   |              +---+                                            |
             +--- export -->+ b +<-------------------------------------------+
                            +---+
```

### Named - Equlas

```TypeScript
import n = require("mod");

doSomething(n.a);
n.b();
```

```ascii
                                                  +---+
                                 +--- property -->+ b +----- reference  -----+
  +------+               +---+   |                +---+                      |
  | File +--- import --->+ n +---+                                           |
  +------+               +---+   |                +---+                      |
                                 +--- property -->+ a +--- reference ---+    |
                                                  +---+                 |    |
                                                                        |    |
                            +---+                                       |    |
             +--- export -->+ a +<--------------------------------------+    |
  +------+   |              +---+                                            |
  | File +---+                                                               |
  +------+   |              +---+                                            |
             +--- export -->+ b +<-------------------------------------------+
                            +---+
```

### Named - Call

```TypeScript
var n = import("mod");

n.then(
  (m) => {
    doSomething(m.a);
    m.b();
  }
)
```

```ascii
  +------+              +---+                +------+             +----------+
  | File +--- import -->+ n +--- property -->+ then +--- local -->+ function |
  +------+              +---+                +------+             +----+-----+
                                                                       |
     +---------------------------- local ------------------------------+
     |
     |                      +---+
     v     +--- property -->+ b +----- reference ----+
   +-+-+   |                +---+                    |
   | m +---+                                         |
   +---+   |                +---+                    |
           +--- property -->+ a +--- reference --+   |
                            +---+                |   |
                                                 |   |
                            +---+                |   |
             +--- export -->+ a +<---------------+   |
  +------+   |              +---+                    |
  | File +---+                                       |
  +------+   |              +---+                    |
             +--- export -->+ b +<-------------------+
                            +---+
```

### NamedDefault - Namespace

```TypeScript
import * as n from "mod";

doSomething(n.default.a);
n.default.b();
```

```ascii
  +------+              +---+
  | File +--- import -->+ n +--- property default ---+
  +------+              +---+                        |
                                                     |
  +------+                      +---+                |
  | File +--- export default -->+ c +<---------------+
  +------+                      +---+
```

### NamedDefault - Default

### NamedDefault - EqualsImport

### NamedDefault - Call

### UnnamedDefault - Namespace

### UnnamedDefault - Default

```TypeScript
import n from "mod";

doSomething(n.a);
n.b();
```

```ascii
  +------+              +---+
  | File +--- import -->+ n +----- reference -----+
  +------+              +---+                     |
                                                  |
  +------+                          +---------+   |
  | File +----- export default ---->+ unnamed +<--+
  +--+---+                          +----+----+
     |                                   |
     |              +---+                |
     +--- create -->+ a +<-- property ---+
     |              +---+                |
     |                                   |
     |              +---+                |
     +--- create -->+ b +<-- property ---+
                    +---+
```

### UnnamedDefault - Equals

### UnnamedDefault - Call

### Equals - Default

### Equals - Equals

### Equals - Call